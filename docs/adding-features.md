# Adding features (end-to-end)

This guide shows how to add a new backend endpoint, database changes, and a small frontend UI to consume it.

## 1) Database change

1. Edit `backend/drizzle/schema.ts` to add or modify tables/columns.
2. Generate a migration:

```bash
yarn --cwd backend db:generate
```

3. Apply it to the local DB:

```bash
yarn --cwd backend db:migrate:apply
```

## 2) Backend route

1. Open `backend/src/index.ts` and define a route using Hono:

```ts
app.get('/items', async (c) => {
  const db = getDb(c.env.DB);
  // query with Drizzle ...
  return c.json({ items: [] });
});
```

2. Run or let Wrangler reload:

```bash
yarn dev:backend
```

3. Test quickly:

```bash
curl http://127.0.0.1:8787/items
```

## 3) Frontend UI

1. In `frontend/src/`, create a component and fetch from `/api/items`:

```ts
async function load() {
  const res = await fetch('/api/items');
  const data = await res.json();
  return data.items;
}
```

2. Render data in your component and wire into `App.tsx`.

## 4) Quality gates

Run checks before pushing:

```bash
yarn typecheck
yarn lint
yarn format:check
```

## Notes

- Keep units small and focused. First land DB/migration + backend route, then UI.
- Write code against types generated by your schema to catch issues early.
